/* --- PHOTOREALISTIC PALETTE & VARIABLES --- */
:root {
  --chassis-bg-start: #4a4a4e;
  --chassis-bg-end: #3a3a3e;
  --recessed-bg: #1e1e1e;
  --screw-color: #8a8a92;
  --text-color: #c5c5c5;
  --text-shadow: 0 1px 1px rgba(0, 0, 0, 0.5);
  --accent-color: #e0822f;
  --led-glow: 0 0 15px var(--accent-color);
  --highlight: #ffb36e;
  --font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
  --font-mono: 'Roboto Mono', monospace;
  --shadow-deep: 10px 10px 30px rgba(0, 0, 0, 0.5);
  --inset-shadow-deep: inset 0 4px 10px rgba(0, 0, 0, 0.8);
  --transition-speed: 0.3s;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

/* --- ENVIRONMENT & LIGHTING --- */
html,
body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  font-family: var(--font-family);
  color: var(--text-color);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  /* Simulates a dark textured surface with a spotlight */
  background-color: #18181a;
  background-image:
    radial-gradient(circle at 50% 40%, rgba(200, 200, 220, 0.08) 0%, transparent 50%),
    linear-gradient(to right, #1a1a1e, #202024, #1a1a1e);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* --- HARDWARE CHASSIS --- */
.app-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 95vw;
  max-width: 700px;
  padding: 24px;
  gap: 24px;
  border-radius: 12px;
  position: relative;
  /* Brushed aluminum texture */
  background: linear-gradient(165deg, var(--chassis-bg-start), var(--chassis-bg-end));
  /* 3D bevel effect */
  border-top: 1px solid rgba(255, 255, 255, 0.15);
  border-left: 1px solid rgba(255, 255, 255, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.3);
  border-right: 1px solid rgba(0, 0, 0, 0.3);
  box-shadow: var(--shadow-deep), var(--inset-shadow-deep);
}

/* Corner screws for realism */
.app-container::before,
.app-container::after {
  content: '';
  position: absolute;
  width: 8px;
  height: 8px;
  background: var(--screw-color);
  border-radius: 50%;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.5);
}
.app-container::before { top: 12px; left: 12px; }
.app-container::after { top: 12px; right: 12px; }

/* --- RECESSED CONTROLS PANEL --- */
.controls {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 16px 24px;
  background: var(--recessed-bg);
  border-radius: 8px;
  box-shadow: var(--inset-shadow-deep);
  width: 100%;
  border: 1px solid #111;
}

/* --- HARDWARE SELECTOR DIAL --- */
#source-select {
  flex-grow: 1;
  padding: 10px 16px;
  border-radius: 6px;
  border: 1px solid #111;
  border-top-color: #555;
  background: linear-gradient(to top, #383838, #444);
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 1px 2px rgba(0,0,0,0.5);
  color: var(--text-color);
  text-shadow: var(--text-shadow);
  font-size: 1rem;
  appearance: none;
  cursor: pointer;
  background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20fill%3D'%23c5c5c5'%20height%3D'24'%20viewBox%3D'0%200%2024%2024'%20width%3D'24'%20xmlns%3D'http%3A//www.w3.org/2000/svg'%3E%3Cpath%20d%3D'M7%2010l5%205%205-5z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 18px 18px;
  transition: all var(--transition-speed) ease;
}

#source-select:hover {
  background: linear-gradient(to top, #404040, #4c4c4c);
}

#source-select:focus {
  outline: none;
  box-shadow: 0 0 10px rgba(255, 140, 0, 0.5), inset 0 1px 2px rgba(0,0,0,0.5);
}

/* --- ILLUMINATED PUSH-BUTTON --- */
.checkbox-container {
  display: flex;
  align-items: center;
  gap: 12px;
  user-select: none;
  font-size: 0.9rem;
  cursor: pointer;
  text-shadow: var(--text-shadow);
}

#always-on-top-checkbox {
  display: none;
}

.checkbox-container .custom-checkbox {
  width: 18px;
  height: 18px;
  border: 1px solid #111;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: all var(--transition-speed) ease;
  position: relative;
  background: linear-gradient(to bottom, #444, #333);
  box-shadow: 0 2px 3px rgba(0,0,0,0.5);
}

/* LED light inside */
.checkbox-container .custom-checkbox::after {
  content: '';
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: #222;
  box-shadow: inset 0 1px 2px #111;
  transition: all var(--transition-speed) ease;
}

#always-on-top-checkbox:checked + .custom-checkbox::after {
  background-color: var(--accent-color);
  box-shadow: var(--led-glow);
}

.checkbox-container:hover .custom-checkbox {
  background: linear-gradient(to bottom, #4a4a4a, #383838);
}

/* --- HEAVY METER BEZEL --- */
.meter-container {
  width: 100%;
  height: 320px;
  border-radius: 12px;
  background: linear-gradient(145deg, #2e2e2e, #1e1e1e);
  box-shadow: var(--inset-shadow-deep);
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  overflow: hidden;
  border: 1px solid #111;
}

/* Realistic glass reflections */
.meter-container::before {
  content: '';
  position: absolute;
  top: 5px;
  left: 5px;
  right: 5px;
  bottom: 5px;
  border-radius: 8px;
  /* Sharp top-left highlight */
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
  pointer-events: none;
}
.meter-container::after {
  content: '';
  position: absolute;
  top: 10%;
  left: 5%;
  width: 90%;
  height: 20%;
  /* Soft broad highlight */
  background: linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 0%, transparent 100%);
  transform: skewX(-30deg);
  pointer-events: none;
}

canvas#vuMeter {
  width: 100%;
  height: 100%;
  display: block;
}

/* --- RESPONSIVE ADJUSTMENTS --- */
@media (max-width: 600px) {
  .controls {
    flex-direction: column;
    align-items: stretch;
  }
}